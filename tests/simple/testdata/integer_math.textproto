name: "integer_math"
description: "Tests for int and uint math."
section {
  name: "int64_math"
  description: "Simple tests for int64."
  test {
    name: "simple_add_positive_positive"
    expr: "42 + 2"
    value: { int64_value: 44 }
  }
  test {
    name: "simple_add_positive_negative"
    expr: "42 + (-2)"
    value: { int64_value: 40 }
  }
  test {
    name: "simple_add_negative_negative"
    expr: "-42 + (-2)"
    value: { int64_value: -44 }
  }
  test {
    name: "simple_sub_positive_positive"
    expr: "42 - 2"
    value: { int64_value: 40 }
  }
  test {
    name: "simple_sub_positive_negative"
    expr: "42 - (-2)"
    value: { int64_value: 44 }
  }
  test {
    name: "simple_sub_negative_negative"
    expr: "-42 - (-2)"
    value: { int64_value: -40 }
  }
  test {
    name: "simple_multiply_positive_positive"
    expr: "42 * 2"
    value: { int64_value: 84 }
  }
  test {
    name: "simple_multiply_positive_negative"
    expr: "42 * (-2)"
    value: { int64_value: -84 }
  }
  test {
    name: "simple_multiply_negative_negative"
    expr: "-42 * (-2)"
    value: { int64_value: 84 }
  }
  test {
    name: "simple_devide_positive_positive"
    expr: "42 / 2"
    value: { int64_value: 21 }
  }
  test {
    name: "simple_devide_positive_negative"
    expr: "-42 / 2"
    value: { int64_value: -21 }
  }
  test {
    name: "simple_devide_negative_negative"
    expr: "-42 / (-2)"
    value: { int64_value: 21 }
  }
  test {
    name: "simple_mod_positive_positive"
    expr: "42 % 5"
    value: { int64_value: 2 }
  }
  test {
    name: "simple_mod_positive_negative"
    expr: "42 % (-5)"
    value: { int64_value: 2 }
  }
  test {
    name: "simple_mod_negative_negative"
    expr: "-42 % (-5)"
    value: { int64_value: -2 }
  }
  test {
    name: "simple_mod_zero"
    expr: "42 % 0"
    eval_error: {
      errors: { message:"modulus by zero" }
    }
  }
  test {
    name: "simple_negtive"
    expr: "-(42)"
    value: { int64_value: -42 }
  }
  test {
    name: "simple_negtive_zero"
    expr: "-(0)"
    value: { int64_value: 0 }
  }
  test {
    name: "double_negtive"
    expr: "-(-42)"
    value: { int64_value: 42 }
  }
  test {
    name: "overflow"
    expr: "9223372036854775807 + 1"
    value: { int64_value: -9223372036854775808 }
  }
  test {
    name: "underflow"
    expr: "-9223372036854775808 - 1"
    value: { int64_value: 9223372036854775807 }
  }
  test {
    name: "devide_zero"
    expr: "15 / 0"
    eval_error: {
      errors: { message:"divide by zero" }
    }
  }
  test {
    name: "multiply_zero"
    expr: "15 * 0"
    value: { int64_value: 0 }
  }
}
section {
  name: "uint64_math"
  description: "Simple tests for uint64."
  test {
    name: "simple_add"
    expr: "42u + 2u"
    value: { uint64_value: 44 }
  }
  test {
    name: "simple_sub"
    expr: "42u - 2u"
    value: { uint64_value: 40 }
  }
  test {
    name: "simple_multiply"
    expr: "42u * 2u"
    value: { uint64_value: 84 }
  }
  test {
    name: "simple_devide"
    expr: "42u / 2u"
    value: { uint64_value: 21 }
  }
  test {
    name: "simple_mod"
    expr: "42u % 5u"
    value: { uint64_value: 2 }
  }
  test {
    name: "simple_mod_zero"
    expr: "42u % 0u"
    eval_error: {
      errors: { message:"modulus by zero" }
    }
  }
  test {
    name: "overflow"
    expr: "18446744073709551615u + 1u"
    value: { uint64_value: 0 }
  }
  test {
    name: "underflow"
    expr: "0u - 1u"
    value: { uint64_value: 18446744073709551615 }
  }
  test {
    name: "devide_zero"
    expr: "15u / 0u"
    eval_error: {
      errors: { message:"divide by zero" }
    }
  }
  test {
    name: "multiply_zero"
    expr: "15u * 0u"
    value: { uint64_value: 0 }
  }
  test {
    name: "negtive_uint64"
    expr: "-(5u)"
    disable_check: true
    eval_error: {
      errors: {  message:"no such overload" }
    }
  }
}
